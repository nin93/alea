<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.33.0">

<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>

  <meta id="repository-name" content="github.com/nin93/alea">
  <title>README - github.com/nin93/alea</title>
  <script type="text/javascript">
  CrystalDoc.base_path = "";
  </script>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="github.com/nin93/alea/Alea" data-name="alea">
      <a href="Alea.html">Alea</a>
      
        <ul>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/CDF" data-name="alea::cdf">
      <a href="Alea/CDF.html">CDF</a>
      
    </li>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/InfinityError" data-name="alea::infinityerror">
      <a href="Alea/InfinityError.html">InfinityError</a>
      
    </li>
  
  <li class="parent " data-id="github.com/nin93/alea/Alea/Internal" data-name="alea::internal">
      <a href="Alea/Internal.html">Internal</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/nin93/alea/Alea/Internal/GaussLegendre" data-name="alea::internal::gausslegendre">
      <a href="Alea/Internal/GaussLegendre.html">GaussLegendre</a>
      
        <ul>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/Internal/GaussLegendre/Quad50" data-name="alea::internal::gausslegendre::quad50">
      <a href="Alea/Internal/GaussLegendre/Quad50.html">Quad50</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="github.com/nin93/alea/Alea/Internal/Ziggurat" data-name="alea::internal::ziggurat">
      <a href="Alea/Internal/Ziggurat.html">Ziggurat</a>
      
        <ul>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/Internal/Ziggurat/Exp" data-name="alea::internal::ziggurat::exp">
      <a href="Alea/Internal/Ziggurat/Exp.html">Exp</a>
      
    </li>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/Internal/Ziggurat/Normal" data-name="alea::internal::ziggurat::normal">
      <a href="Alea/Internal/Ziggurat/Normal.html">Normal</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/NaNError" data-name="alea::nanerror">
      <a href="Alea/NaNError.html">NaNError</a>
      
    </li>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/NoConvergeError" data-name="alea::noconvergeerror">
      <a href="Alea/NoConvergeError.html">NoConvergeError</a>
      
    </li>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/PRNG" data-name="alea::prng">
      <a href="Alea/PRNG.html">PRNG</a>
      
    </li>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/Random" data-name="alea::random">
      <a href="Alea/Random.html">Random</a>
      
    </li>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/UndefinedError" data-name="alea::undefinederror">
      <a href="Alea/UndefinedError.html">UndefinedError</a>
      
    </li>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/XSR128" data-name="alea::xsr128">
      <a href="Alea/XSR128.html">XSR128</a>
      
    </li>
  
  <li class=" " data-id="github.com/nin93/alea/Alea/XSR256" data-name="alea::xsr256">
      <a href="Alea/XSR256.html">XSR256</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="alea" class="anchor" href="#alea">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Alea</h1>

<p><a href="https://travis-ci.org/nin93/alea" target="_blank"><img src="https://travis-ci.org/nin93/alea.svg?branch=master" alt="Build Status"/></a></p>

<p>Alea is a collection of utilities to work with most known probability distributions,
written in pure Crystal.</p>

<p>Features:</p>

<ul><li><a href="#sampling" target="_blank">Random sampling</a></li><li><a href="#prngs" target="_blank">PRNGs implementations</a></li><li><a href="#cumulative-distribution-functions" target="_blank">Cumulative Distribution Functions</a></li></ul></ul>

<blockquote><strong>Note</strong>: This project is in early development state and many distributions are
  still missing, as well as cumulative distribution functions, so keep in mind that
  breaking changes may occur frequently.</blockquote>

<h2><a id="why-crystal" class="anchor" href="#why-crystal">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Why Crystal?</h2>

<p>Crystal compiles to really fast native code without sacrificing any of the modern
programming languages standards providing a nice and clean interface.</p>

<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>

<ol><li>Add the dependency to your <code>shard.yml</code>:</li></ol>

<pre><code class="language-yaml">  dependencies:
    alea:
      github: nin93/alea</code></pre>

<ol><li>Run <code>shards install</code></li></ol>

<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>

<pre><code class="language-crystal"><span class="k">require</span> <span class="s">&quot;alea&quot;</span></code></pre>

<h2><a id="prn-gs" class="anchor" href="#prn-gs">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>PRNGs</h2>

<p>The algorithms in use for generating 64-bit uints and floats are from the
<a href="http://prng.di.unimi.it/" target="_blank">xoshiro</a> (XOR/shift/rotate) collection, designed by
Sebastiano Vigna and David Blackman: really fast generators promising exquisite
statistical properties as well.</p>

<p>Implemented engines:</p>

<ul><li><code>XSR128</code> backed by:</li></ul>

<ul><li><em>xoroshiro128++</em> as <code>#next_u</code></li><li><em>xoroshiro128+</em> as <code>#next_f</code></li></ul></ul>

<ul><li><code>XSR256</code> backed by:</li></ul>

<ul><li><em>xoshiro256++</em> as <code>#next_u</code></li><li><em>xoshiro256+</em> as <code>#next_f</code></li></ul></ul>

<p>Digits stand for the storage of their state in bits.
Their period is thus <code>2^128 -1</code> for <code>XSR128</code> and <code>2^256 -1</code> for <code>XSR256</code>.</p>

<p>The <code>+</code> versions are slightly faster, but since they have a bias on the right-most
bits, they are only used for generating random floats, which lose those bits while
shifting to obtain the mantissa.</p>

<p>More informations are detailed in: http://prng.di.unimi.it/.</p>

<blockquote>See the <a href="https://github.com/nin93/alea/tree/master/benchmarks" target="_blank">benchmarks</a> for a
  comparison between these engines.</blockquote>

<h2><a id="sampling" class="anchor" href="#sampling">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Sampling</h2>

<p><code>Random</code> is the interface provided to perform sampling:</p>

<pre><code class="language-crystal">random <span class="o">=</span> <span class="t">Alea</span><span class="t">::</span><span class="t">Random</span>.<span class="k">new</span>
random.normal <span class="c"># =&gt; -0.36790519967553736</span></code></pre>

<p>It also accepts an initial seed to reproduce the same seemingly random events across runs:</p>

<pre><code class="language-crystal">seed <span class="o">=</span> <span class="n">9377u64</span>
random <span class="o">=</span> <span class="t">Alea</span><span class="t">::</span><span class="t">Random</span>.<span class="k">new</span>(seed)
random.exp <span class="c"># =&gt; 2.8445710982736148</span></code></pre>

<p>By default, the PRNG in use by <code>Random</code> is <code>XSR128</code>. You can, though, pass the desired
engine as an argument to the constructor. Here is an example using <code>XSR256</code>:</p>

<pre><code class="language-crystal">random <span class="o">=</span> <span class="t">Alea</span><span class="t">::</span><span class="t">Random</span>.<span class="k">new</span>(<span class="t">Alea</span><span class="t">::</span><span class="t">XSR256</span>)
random.float <span class="c"># =&gt; 0.6533582874035311</span>
random.prng  <span class="c"># =&gt; Alea::XSR256</span>

<span class="c"># or seeded as well</span>
random <span class="o">=</span> <span class="t">Alea</span><span class="t">::</span><span class="t">Random</span>.<span class="k">new</span>(<span class="n">193</span>, <span class="t">Alea</span><span class="t">::</span><span class="t">XSR256</span>)
random.float <span class="c"># =&gt; 0.80750616724688</span></code></pre>

<p>All PRNGs in this library inherits from an abstract class <code>PRNG</code>; you are then allowed
to build your own custom PRNG by inheriting the above parent class and passing it to
<code>Random</code> just like in the previous example:</p>

<pre><code class="language-crystal"><span class="k">class</span> <span class="t">MyGenerator</span> <span class="o">&lt;</span> <span class="t">Alea</span><span class="t">::</span><span class="t">PRNG</span>
  <span class="k">def</span> <span class="m">next_u</span> : <span class="t">UInt64</span>
    <span class="c"># must be implemented</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">next_f</span> : <span class="t">Float64</span>
    <span class="c"># must be implemented</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">jump</span> : <span class="k">self</span>
    <span class="c"># must be implemented</span>
  <span class="k">end</span>

  ...
<span class="k">end</span>

random <span class="o">=</span> <span class="t">Alea</span><span class="t">::</span><span class="t">Random</span>(<span class="t">MyGenerator</span>)</code></pre>

<h3><a id="unsafe-methods" class="anchor" href="#unsafe-methods">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Unsafe methods</h3>

<p>Plain sampling methods (such as <code>#normal</code>, <code>#gamma</code>) performs checks over arguments
passed to prevent bad data generation or inner exceptions.
In order to avoid them (checks might be slow) you must use their unsafe version by
prepending <code>next_</code> to them:</p>

<pre><code class="language-crystal">random <span class="o">=</span> <span class="t">Alea</span><span class="t">::</span><span class="t">Random</span>.<span class="k">new</span>
random.normal(loc: <span class="n">0</span>, sigma: <span class="n">0</span>)      <span class="c"># raises Alea::UndefinedError: sigma is 0 or negative.</span>
random.next_normal(loc: <span class="n">0</span>, sigma: <span class="n">0</span>) <span class="c"># these might raise internal exceptions.</span></code></pre>

<p>Timings are definitely comparable, though. See the
<a href="https://github.com/nin93/alea/tree/master/benchmarks" target="_blank">benchmarks</a>
for direct comparisons between those methods.</p>

<h3><a id="supported-distributions" class="anchor" href="#supported-distributions">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Supported Distributions</h3>

<p>Current sampling methods are implemented for the following distributions:</p>

<ul><li>Beta</li><li>Chi-Square</li><li>Exponential</li><li>Gamma</li><li>Laplace</li><li>Log-Normal</li><li>Normal</li><li>Poisson</li><li>Uniform</li></ul></ul>

<h2><a id="cumulative-distribution-functions" class="anchor" href="#cumulative-distribution-functions">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Cumulative Distribution Functions</h2>

<p><code>CDF</code> is the interface used to calculate the Cumulative Distribution Functions.
Given <em>X</em> ~ <em>D</em> and a fixed quantile <em>x</em>, CDFs are defined as the functions that
associate <em>x</em> to the probability that the real-valued random <em>X</em> from the
distribution <em>D</em> will take a value less or equal to <em>x</em>.</p>

<p>Arguments passed to <code>CDF</code> methods to shape the distributions are analogous to
those used for sampling:</p>

<pre><code class="language-crystal"><span class="t">Alea</span><span class="t">::</span><span class="t">CDF</span>.normal(<span class="n">0.0</span>)                       <span class="c"># =&gt; 0.5</span>
<span class="t">Alea</span><span class="t">::</span><span class="t">CDF</span>.normal(<span class="n">2.0</span>, loc: <span class="n">1.0</span>, sigma: <span class="n">0.5</span>) <span class="c"># =&gt; 0.9772498680518208</span>
<span class="t">Alea</span><span class="t">::</span><span class="t">CDF</span>.chisq(<span class="n">5.279</span>, df: <span class="n">5.0</span>)             <span class="c"># =&gt; 0.6172121213841358</span></code></pre>

<h3><a id="supported-distributions" class="anchor" href="#supported-distributions">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Supported Distributions</h3>

<p>Current CDFs estimations are implemented for the following distributions:</p>

<ul><li>Chi-Square</li><li>Exponential</li><li>Gamma</li><li>Laplace</li><li>Log-Normal</li><li>Normal</li><li>Poisson</li><li>Uniform</li></ul></ul>

<h2><a id="references" class="anchor" href="#references">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>References</h2>

<p>Fully listed in <a href="https://github.com/nin93/alea/tree/master/LICENSE.md" target="_blank">LICENSE.md</a>:</p>

<ul><li><a href="https://github.com/numpy/numpy" target="_blank">NumPy</a> <code>random</code> module for pseudo-random sampling methods</li><li><a href="https://github.com/JuliaLang/julia" target="_blank">JuliaLang</a> <code>random</code> module for ziggurat methods</li><li><a href="https://github.com/jkovacic/IncGammaBeta.jl" target="_blank">IncGammaBeta.jl</a> for incomplete gamma functions</li></ul>

<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>

<ol><li>Fork it (&lt;https://github.com/nin93/alea/fork>)</li><li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li><li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li><li>Push to the branch (<code>git push origin my-new-feature</code>)</li><li>Create a new Pull Request</li></ol>

<h2><a id="contributors" class="anchor" href="#contributors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributors</h2>

<ul><li><a href="https://github.com/nin93" target="_blank">Elia Franzella</a> - creator and maintainer</li></ul>
</div>
</body>
</html>
